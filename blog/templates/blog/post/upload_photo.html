{% extends "blog/base_sidebar_narrow.html" %}
{% block title %}Aktualności{% endblock %}


{% block content %}
{% include "blog/modal/add_country_modal.html" %}


    <h2>Prześlij zdjęcie</h2>
    <form id="uploadForm" enctype="multipart/form-data">
        <input type="file" name="image" id="imageInput" required>
        <button type="submit">Wyślij</button>
    </form>
    <p id="responseMessage"></p>
    <script>
        document.getElementById('uploadForm').addEventListener('submit', function(event) {
            event.preventDefault();
            let formData = new FormData();
            let imageFile = document.getElementById('imageInput').files[0];
            formData.append('image', imageFile);

            fetch('/upload/', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.file_url) {
                    document.getElementById('responseMessage').innerHTML = `<a href="${data.file_url}" target="_blank">Zobacz przesłane zdjęcie</a>`;
                } else {
                    document.getElementById('responseMessage').innerText = 'Błąd przesyłania';
                }
            })
            .catch(error => console.error('Błąd:', error));
        });
    </script>

<!--<label for="formFileMultiple" class="form-label">Multiple files input example</label>-->
<!--<input class="form-control" type="file" id="formFileMultiple" multiple />-->
<!--        <div class="mb-3">-->
<!--            <button type="submit" class="btn btn-primary">Zapisz</button>-->
<!--        </div>-->

{% endblock %}